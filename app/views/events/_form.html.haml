= raw error_messages_for @event
- form_for [@site, @event] do |f|
  %ul.form
    - if  @event && !@event.new_record?
      %li{:style => "float:right"}= link_to "Delete event", site_event_path(@site,  @event), :confirm => "Are you sure you want to delete this event?", :method => :delete
    %li
      = f.label :name
      = f.text_field :name, :style => 'width:150px'
      = f.label :page_id, 'References page', :style => 'width:150px'
      = f.select :page_id, @site.pages.not_deleted.map{|p| [p.name, p.id]}, :include_blank => true
    %li.indent
      = f.check_box :multi_day
      = f.label :multi_day, 'Spans multiple days', :style => 'width:auto'
    %li
      = f.label :start_at
      = f.date_select :start_at
    %li#end_at_field
      = f.label :end_at
      = f.date_select :end_at
    %li
      = f.label :description
      = f.text_area :description, :style => 'width:400px; height:70px'
    %li.indent
      = f.check_box :reminder
      = f.label :reminder, 'Send a reminder', :style => 'width:auto'
    %li#remind_on_field
      = f.label :remind_on
      = f.date_select :remind_on
    %li.indent
      = f.submit button_value
= javascript_tag js_md = "if($('event_multi_day').checked){$('end_at_field').show()} else {$('end_at_field').hide()}"
= observe_field :event_multi_day, :function => js_md
= javascript_tag js_r = "if($('event_reminder').checked){$('remind_on_field').show()} else {$('remind_on_field').hide()}"
= observe_field :event_reminder, :function => js_r
